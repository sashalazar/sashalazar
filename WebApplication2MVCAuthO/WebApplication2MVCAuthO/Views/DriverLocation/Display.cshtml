@using Microsoft.AspNetCore.Http

@model WebApplication2MVCAuthO.Models.HomeViewModels.DriverLocationModel

@inject IHttpContextAccessor HttpContextAccessor

@{
    ViewData["Title"] = "Edit";
    var driverLocationId = @HttpContextAccessor.HttpContext.Session.GetString("DriverLocationModelId");
    if (string.IsNullOrEmpty(driverLocationId)) { HttpContextAccessor.HttpContext.Response.Redirect("Home/Error"); }
}
<h2>Edit</h2>
<p>
    @HttpContextAccessor.HttpContext.Session.GetString("DriverLocationModelId");
</p>
<h4>DriverLocationModel</h4>
<hr />
<div class="row">
    <div class="col-md-4">
        <div>
            <h4>DriverLocationModel</h4>
            <hr />
            <dl class="dl-horizontal">
                <dt>
                    @Html.DisplayNameFor(model => model.Latitude)
                </dt>
                <dd>
                    @Html.DisplayFor(model => model.Latitude)
                </dd>
                <dt>
                    @Html.DisplayNameFor(model => model.Longitude)
                </dt>
                <dd>
                    @Html.DisplayFor(model => model.Longitude)
                </dd>
                <dt>
                    @Html.DisplayNameFor(model => model.Status)
                </dt>
                <dd>
                    @Html.DisplayFor(model => model.Status)
                </dd>
            </dl>
        </div>
    </div>
</div>

<div>
    @if (Model.Status == "Open")
    {
        <script>
            var params = { reqid: "@driverLocationId", status: "Open" };
            //alert(locTimerId);
            if (!locTimerId) updateDriverLocationTimeOut(params);
        </script>

        <a id="updateDriverLocation" href="javascript:void(0)" class="btn btn-info btn-default"
           data-reqid="@driverLocationId" data-status="Closed">Выключить</a>
    }
    else
    {
        <script>
            var locTimerId = null;
        </script>

        <a id="updateDriverLocation" href="javascript:void(0)" class="btn btn-info btn-default"
           data-reqid="@driverLocationId" data-status="Open">Включить</a>
    }
</div>

<script>
    function confStopTaxing() {               
        app.dialog.confirm('Временно остановить работу?',
            'Требуется подтверждение',
            function() {
                params.status = "Closed";
                clearTimeout(locTimerId);
                UpdDriverGeoLocation(param);
            });
    }

    

    //document.getElementById("myAnchor").addEventListener("click", function (event) {
    //    //alert(event);
    //    event.preventDefault();
    //});

    //jQuery(document).on('click', 'a.link.back', function (event) {
    //    event.preventDefault();
    //    event.stopPropagation();

    //    return false;
    //});

</script>